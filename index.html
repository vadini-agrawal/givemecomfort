<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="icon.png"/>
    <!-- <script src="//code.jquery.com/jquery-1.10.1.min.js"></script> -->
    <p id="c"></p>
    <script type="text/javascript">

        function doIt() {
            var url_string = "https://webservices.amazon.com/onca/xml?AWSAccessKeyId=AKIAJZM2YE25UECK34PQ&AssociateTag=barelyfunctio-20&Item.1.ASIN=B01JIEBZZC&Item.1.Quantity=1&Operation=CartCreate&ResponseGroup=Cart&Service=AWSECommerceService&Timestamp=2017-10-15T04%3A51%3A32.000Z&Signature=%2BVSqLGRrKKFLn0vWBtEICXmy6Z%2Bzz81J9%2B5smTtGgA4%3D";
            var url = new URL(url_string);
            // var c = url.searchParams.entries();
            console.log(c);
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    console.log(this);
                    myFunction(this);
                } else {
                    console.log(this);
                }
            };
            xhttp.open("GET", url, true);
            // xhttp.setRequestHeader("Access-Control-Allow-Origin", "*");
            xhttp.send();
        }
        function myFunction(xml) {

            // if (window.DOMParser)
            //   {
            //   parser=new DOMParser();
            //   xmlDoc=parser.parseFromString(c,"text/xml");
            //   }
            // else // Internet Explorer
            //   {
            //   xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
            //   xmlDoc.async=false;
            //   xmlDoc.loadXML(txt);
            //   }
            var xmlDoc = xml.responseXML;
            var x = xmlDoc.getElementsByTagName("RequestID")[0];
            var y = x.childNodes[0];
            document.getElementById("c").innerHTML = y.nodeValue;
        }
        // function myFunction(xml) {
        //   var x, xmlDoc, txt;
        //   xmlDoc = xml.c;
        //   txt = "";
        //   x = txt.getElementsByTagName("PurchaseURL");
        //   console.log(x);
        //   // for (var i = 0, len = x.length; i < len; i++){
        //   //   if (x[i] == "&"){
        //   //       var res = x.replace("&", "&amp;");
        //   //   }
        //   // }
        //   txt = childNodes[0].nodeValue;
        //   txt = document.getElementById("c").innerHTML;
        // }
    </script>
  </head>

  <body>
    <button class="makeMe" onclick="doIt()"> Make Me Happy </button>
  </body>

</html>